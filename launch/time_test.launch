<?xml version="1.0"?>
<launch>
  <arg name="namespace" default="flir_boson"/>
  <arg name="frame_id" default="bf1"/>

  <!-- the linux file descriptor location for the camera -->
  <arg name="ip_addr" default="169.254.87.157"/>

  <!-- valid values are 30.0 or 60.0 for Bosons -->
  <arg name="frame_rate" default="60.0"/>

  <!-- location of the camera calibration file -->
  <arg name="camera_info_url" default="package://flir_boson_ethernet/example_calibrations/BlackFlyS.yaml"/>

  <group ns="$(arg namespace)">
    <node pkg="nodelet" 
          type="nodelet"
          name="nodelet_manager"
          args="manager"
          output="screen"/>

    <node pkg="nodelet" 
          type="nodelet"
          name="left_camera_node"
          args="load flir_boson_ethernet/SyncCameraController nodelet_manager"
          output="screen">
      <param name="frame_id" type="str" value="$(arg frame_id)"/>
      <param name="ip_addr" type="str" value="$(arg ip_addr)"/>
      <param name="camera_info_url" type="str" value="$(arg camera_info_url)"/>
    </node>

    <node pkg="nodelet"
          type="nodelet"
          name="time_sync"
          args="load flir_boson_ethernet/TimeSynchronizer nodelet_manager">
      <param name="frame_rate" type="double" value="$(arg frame_rate)"/>
    </node>

    <node pkg="nodelet"
          type="nodelet"
          name="time_diff"
          args="load flir_boson_ethernet/TimeDifference nodelet_manager">
      <param name="image_topic1" type="string" value="image_raw" />
      <param name="header_topic2" type="string" value="actual_timestamp" />
    </node>

    <node name="image_view"
          pkg="image_view"
          type="image_view"
          output="screen">
      <remap from="image" to="image_raw" />
    </node>
  </group>


</launch>
